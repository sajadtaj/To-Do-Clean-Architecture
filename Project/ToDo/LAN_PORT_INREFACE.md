# **مستند فنی: تحلیل و بررسی کارت‌های شبکه، پورت‌ها و LAN در لینوکس**

---

## 📝 **عنوان کامل سند**

تحلیل و پایش رابط‌های شبکه، وضعیت پورت‌ها و تنظیمات LAN در محیط لینوکس
**(مناسب برای تحلیل اتصال، رفع خطا و مانیتورینگ شبکه)**

---

## 🧭 **اهداف این سند**

* شناسایی و پایش کارت‌های شبکه (NICs) فعال در سیستم
* بررسی پورت‌های باز و سرویس‌های در حال اجرا
* تحلیل وضعیت ارتباط سیستم با LAN/Internet
* ارائه ابزارها و دستورات حرفه‌ای لینوکسی برای DevOps و Adminها
* راهنمای گام‌به‌گام برای رفع مشکلات شبکه مانند IP Conflict، عدم اتصال، عدم پاسخ پورت و...

---

## 🧩 **۱. شناسایی و نمایش کارت‌های شبکه فعال**

### 🔧 دستور اصلی:

```bash
ip a
```

### ✅ خروجی نمونه:

```bash
2: ens33: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 ...
    inet 192.168.1.10/24 ...
```

### 📌 نکات:

* وضعیت `UP` یا `DOWN`
* آدرس IP اختصاص‌یافته (IPv4 و IPv6)
* نام کارت: معمولاً `eth0`, `ens33`, `wlan0`, ...
* MTU، MAC Address و altname

---

## 🧩 **۲. نمایش کارت‌ها بدون جزئیات IP (فقط وضعیت فیزیکی)**

```bash
ip link show
```

---

## 🧩 **۳. لیست کارت‌های شبکه موجود در سیستم**

```bash
ls /sys/class/net/
```

---

## 🧩 **۴. نمایش کارت‌های متصل به LAN (فقط فعال)**

```bash
ip -o link show | grep 'state UP'
```

---

## 🧩 **۵. دریافت اطلاعات سخت‌افزاری کارت شبکه**

```bash
sudo lshw -class network
```

> شامل: سرعت کارت، درایور، تولیدکننده، پشتیبانی از VLAN، Wireless و...

---

## 🧩 **۶. بررسی وضعیت کارت وای‌فای (در صورت وجود)**

```bash
iwconfig
```

---

## 🧩 **۷. بررسی وضعیت آدرس‌دهی IP و Gateway**

```bash
ip route show
```

یا:

```bash
route -n
```

---

## 🧩 **۸. مشاهده جدول DNS و تنظیمات resolve**

```bash
cat /etc/resolv.conf
```

---

## 🧩 **۹. مشاهده پورت‌های باز و سرویس‌های لیسن شده**

```bash
sudo ss -tulnp
```

یا نسخه قدیمی‌تر:

```bash
sudo netstat -tulnp
```

### ستون‌ها:

| ستون | توضیح                   |
| ---- | ----------------------- |
| t    | TCP                     |
| u    | UDP                     |
| l    | لیسن                    |
| n    | بدون resolve دامنه      |
| p    | نمایش برنامه (PID/Name) |

---

## 🧩 **۱۰. مشاهده وضعیت فایروال UFW (در اوبونتو)**

```bash
sudo ufw status
```

---

## 🧩 **۱۱. تست اتصال LAN به Gateway / Server**

```bash
ping <IP-Address>
```

برای مثال:

```bash
ping 192.168.1.1
```

---

## 🧩 **۱۲. بررسی مسیر ترافیک به یک مقصد**

```bash
traceroute <domain or IP>
```

> بررسی مسیر مسیریابی به مقصد (برای مشکلات بین‌راهی)

---

## 🧩 **۱۳. بررسی دقیق وضعیت اتصال روی یک پورت**

```bash
nc -zv <IP> <PORT>
```

مثال:

```bash
nc -zv 192.168.1.10 443
```

---

## 🧩 **۱۴. بررسی رنج IPهای conflict شده با docker یا bridge دیگر**

```bash
ip a
```

و بررسی پیکربندی:

```bash
cat /etc/docker/daemon.json
```

---

## 🧩 **۱۵. بررسی نام DNS/Hostname و رفع خطای resolve**

### بررسی hostname:

```bash
hostname
```

### بررسی و اصلاح فایل hosts:

```bash
cat /etc/hosts
```

اصلاح:

```bash
127.0.0.1 your-hostname
```

---

## 🧪 **مطالعه موردی (Case Study):**

### خطا:

سرویس داکر روی پورت `4834` اجرا شده ولی از شبکه شرکت دیده نمی‌شود.

### تحلیل:

* `ip a`: مشاهده شده `docker0` از رنج `172.17.0.0/16` استفاده می‌کند.
* این رنج با LAN شرکت تداخل دارد → کانفلیکت

### راه‌حل:

تغییر `/etc/docker/daemon.json`:

```json
{
  "bip": "192.168.147.1/24"
}
```

و سپس:

```bash
sudo systemctl restart docker
```

---

## 📚 **جمع‌بندی ابزارهای مهم در این سند**

| ابزار        | کاربرد                    |
| ------------ | ------------------------- |
| `ip`         | نمایش اینترفیس‌ها و route |
| `ss`         | لیست پورت‌های باز         |
| `ufw`        | فایروال                   |
| `ping`       | تست دسترسی                |
| `nc`         | بررسی دستی پورت           |
| `lshw`       | اطلاعات سخت‌افزار         |
| `traceroute` | مسیر ارتباطی              |
| `iwconfig`   | وای‌فای                   |
| `netstat`    | ابزار قدیمی تحلیل پورت    |
| `ethtool`    | ابزار سطح پایین کارت شبکه |

---

## ✅ نتیجه‌گیری

این مستند مرجعی کامل برای شناسایی و تحلیل کارت‌های شبکه، مسیر ترافیک، پورت‌ها و تنظیمات در سیستم‌های لینوکس است و می‌تواند به‌عنوان یک **چک‌لیست روزانه** برای کارشناسان زیرساخت، تیم‌های DevOps و عملیات استفاده شود.
